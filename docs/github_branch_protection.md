# GitHub 分支保护规则说明

## 分支保护规则选项详解

### 1. Require a pull request before merging
- **功能**：要求所有更改必须通过Pull Request进行，禁止直接推送到受保护分支
- **子选项**：
  - Require approvals：要求审批
  - Dismiss stale pull request approvals when new commits are pushed：新提交时撤销旧的审批
  - Require review from Code Owners：要求代码所有者审查
  - Restrict who can dismiss pull request reviews：限制谁可以驳回PR审查
- **建议**：建议启用，这是保证代码质量的基础

### 2. Require status checks to pass before merging
- **功能**：要求PR在合并前通过指定的状态检查
- **子选项**：
  - Require branches to be up to date before merging：合并前要求分支是最新的
  - 选择需要的状态检查项目（如CI测试、代码扫描等）
- **作用**：
  - 确保代码通过自动化测试
  - 验证代码风格和质量
  - 检查是否符合项目规范
- **建议**：如果项目有CI/CD流程，强烈建议启用

### 3. Require conversation resolution before merging
- **功能**：要求在合并前解决所有对话
- **作用**：
  - 确保所有的讨论和建议都得到处理
  - 防止遗漏重要反馈
  - 提高代码质量
- **建议**：建议启用，确保充分的代码审查

### 4. Require signed commits
- **功能**：要求所有提交必须经过签名
- **作用**：
  - 验证提交的作者身份
  - 增加代码的安全性
  - 防止伪造提交
- **建议**：对安全要求高的项目建议启用

### 5. Require linear history
- **功能**：要求线性的提交历史
- **作用**：
  - 保持提交历史清晰
  - 避免复杂的合并提交
  - 便于代码回滚
- **建议**：根据团队git使用习惯决定

### 6. Require deployments to succeed before merging
- **功能**：要求部署成功才能合并
- **作用**：
  - 确保代码可以成功部署
  - 防止破坏生产环境
  - 验证部署流程
- **建议**：如果有自动部署流程，建议启用

### 7. Lock branch
- **功能**：锁定分支
- **作用**：
  - 防止任何推送到该分支
  - 适用于存档的分支
  - 保护重要分支
- **建议**：谨慎使用，通常用于特殊情况

### 8. Allow force pushes
- **功能**：允许强制推送
- **子选项**：
  - 指定可以强制推送的人员
- **作用**：
  - 允许重写分支历史
  - 清理提交历史
- **建议**：一般不建议启用，特殊情况下谨慎使用

### 9. Allow deletions
- **功能**：允许删除分支
- **作用**：
  - 控制分支的删除权限
  - 防止重要分支被意外删除
- **建议**：对主分支建议禁用

## 最佳实践建议

1. **循序渐进**
   - 从基本的保护规则开始
   - 根据项目需求逐步增加限制
   - 注意平衡安全性和开发效率

2. **团队沟通**
   - 向团队成员解释规则的重要性
   - 收集反馈调整规则
   - 确保规则不会过度影响开发效率

3. **定期审查**
   - 定期检查规则的有效性
   - 根据项目发展调整规则
   - 及时响应团队反馈

## 补充说明

1. **分支命名建议**
   - 功能分支：`feature/功能名称`
   - 修复分支：`fix/问题描述`
   - 发布分支：`release/版本号`

2. **提交信息规范**
   - 使用清晰的提交信息
   - 遵循统一的提交信息格式
   - 关联相关的Issue编号

3. **代码审查要点**
   - 代码质量和风格
   - 功能完整性
   - 测试覆盖率
   - 文档更新 