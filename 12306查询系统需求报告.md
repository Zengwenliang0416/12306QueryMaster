# 12306 火车票查询系统需求报告（前后端分离版）

## 1. 系统架构

### 1.1 技术栈
- 前端：Vue 3 + Element Plus + Vite
- 后端：Spring Boot 3.x + MyBatis-Plus
- 数据库：MySQL 8.x
- 缓存：Redis

### 1.2 架构设计
- 采用RESTful API设计规范
- 使用JWT进行身份认证
- 引入Redis缓存热门车次信息
- 采用分布式session管理

## 2. 功能需求

### 2.1 用户管理模块
- 用户注册与登录
- 个人信息管理
- 常用联系人管理
- 查询历史记录

### 2.2 车票查询模块
#### 2.2.1 基础查询功能
```json
POST /api/v1/trains/query
{
    "fromStation": "深圳北",
    "toStation": "长沙南",
    "departDate": "2024-01-20",
    "timeRange": {
        "startTime": "08:00",
        "endTime": "18:00"
    }
}
```
- 支持多条件筛选：
  - 车次类型（G/D/K等）
  - 出发/到达时间段
  - 席别类型
  - 价格区间

#### 2.2.2 经停站查询
```json
GET /api/v1/trains/{trainNo}/stops

Response:
{
    "trainNo": "G1234",
    "stops": [
        {
            "stationName": "深圳北",
            "arrivalTime": null,
            "departureTime": "08:00",
            "stopDuration": 0,
            "distance": 0
        }
    ]
}
```

### 2.3 收藏与提醒模块
- 收藏常用车次
- 余票提醒设置
- 价格波动提醒
- 站点更新提醒

## 3. 前端设计

### 3.1 页面布局
- 响应式设计，支持移动端访问
- 深色模式支持
- 多主题切换

### 3.2 核心页面
1. 首页
   - 快捷查询表单
   - 热门路线推荐
   - 最近查询历史

2. 查询结果页
   - 高级筛选器
   - 车次列表展示
   - 价格日历视图
   - 余票趋势图表

3. 车次详情页
   - 经停站时刻表
   - 票价信息
   - 一键收藏
   - 分享功能

## 4. 后端设计

### 4.1 数据库设计
```sql
-- 核心表结构
CREATE TABLE t_user (
    id BIGINT PRIMARY KEY,
    username VARCHAR(50),
    password VARCHAR(100),
    email VARCHAR(100),
    created_at DATETIME
);

CREATE TABLE t_station (
    code VARCHAR(10) PRIMARY KEY,
    name VARCHAR(50),
    pinyin VARCHAR(100),
    region VARCHAR(50)
);
```

### 4.2 接口设计
```json
// 统一响应格式
{
    "code": 200,
    "message": "success",
    "data": {}
}
```

### 4.3 缓存策略
- Redis缓存热门车次信息
- 车站数据本地缓存
- 查询结果缓存（5分钟）

## 5. 性能要求

### 5.1 前端性能
- 首屏加载时间 < 2s
- 页面切换响应 < 300ms
- 支持数据懒加载

### 5.2 后端性能
- API响应时间 < 500ms
- 并发支持 > 1000 QPS
- 查询缓存命中率 > 80%

## 6. 安全要求
- XSS/CSRF防御
- 接口访问频率限制
- 数据脱敏处理
- 日志审计

## 7. 部署要求
- 前端：Node.js 16+
- 后端：JDK 17+
- 数据库：MySQL 8.0+
- Redis 6.0+

## 8. 后续优化计划
1. 引入ElasticSearch优化站点搜索
2. 添加WebSocket实现实时票价推送
3. 集成支付功能
4. 开发移动端APP
5. 引入AI智能推荐系统 